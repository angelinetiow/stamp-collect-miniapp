const CACHE_NAME="stamp-collect-v1",STATIC_ASSETS=["./","./index.html","./bundle.js","./manifest.json","./images/stamp collect-background.png","./images/coffee-voucher.png","./svg/store stamp-default.svg","./svg/store stamp-filled.svg","./svg/reward stamp-default.svg","./svg/reward stamp-filled.svg","./svg/line-default.svg","./svg/line-filled.svg","./svg/left curve-default.svg","./svg/left curve-filled.svg","./svg/right curve-default.svg","./svg/right curve-filled.svg","./svg/stamp illustration.svg","./svg/Membership-modal-bg.svg","./svg/ray-sparkle.svg"];self.addEventListener("install",e=>{console.log("[SW] Installing service worker..."),e.waitUntil(caches.open(CACHE_NAME).then(e=>(console.log("[SW] Caching static assets"),e.addAll(STATIC_ASSETS))).then(()=>(console.log("[SW] Static assets cached"),self.skipWaiting())).catch(e=>{console.error("[SW] Failed to cache:",e)}))}),self.addEventListener("activate",e=>{console.log("[SW] Activating service worker..."),e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>e!==CACHE_NAME).map(e=>(console.log("[SW] Deleting old cache:",e),caches.delete(e))))).then(()=>(console.log("[SW] Service worker activated"),self.clients.claim())))}),self.addEventListener("fetch",e=>{"GET"===e.request.method&&e.request.url.startsWith("http")&&e.respondWith(caches.match(e.request).then(s=>s||fetch(e.request).then(s=>{if(!s||200!==s.status||"basic"!==s.type)return s;const t=s.clone();return caches.open(CACHE_NAME).then(s=>{s.put(e.request,t)}),s}).catch(()=>"document"===e.request.destination?caches.match("./index.html"):new Response("Offline",{status:503}))))});